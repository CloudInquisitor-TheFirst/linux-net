# Lab 25 ‚öôÔ∏è

## Configuring DNS in the Big Three Networking Services
You can view the DNS configuration in different ways depending on the distribution and the networking service used. 

### View the DNS server setting with resolv.conf

Type `cat /etc/resolv.conf` . The results will look similar to the example below.
```
root@deb52:~# cat /etc/resolv.conf
# Generated by NetworkManager
nameserver 10.0.2.1
```

In this example I used a Debian client. That system uses NetworkManager, which generates the DNS (or nameserver) information and places it in the resolv.conf file. To view/modify the DNS server IP address on a system that runs NetworkManager you would use the nmcli command. 

### View the DNS server setting with the nmcli command

To view the DNS server setting with nmcli, simply type `nmcli` and look toward the end of the results for "DNS configuration. Here's an example:

```
DNS configuration:
				servers: 10.0.2.1
				interface: enp1s0
```

To modify the DNS coniguration you could use syntax similar to this:

`nmcli connection modify enp1s0 ipv4.dns 10.0.2.3`

That would change the DNS server setting from 10.0.2.1 to 10.0.2.3. We'll cover nmcli more in an upcoming section.

### View the DNS server setting with resolved.conf

If a system uses the systemd-networkd network configuration, then the settings are stored in /etc/systemd/resolved.conf. For example:

```
[Resolve]
DNS=10.0.2.1
FallbackDNS=10.0.2.2
#Domains=
#LLMNR=yes
#MulticastDNS=yes
#DNSSEC=allow-downgrade
#DNSOverTLS=no
#Cache=yes
#DNSStubListener=yes
#ReadEtcHosts=yes
```

In this example, we have a primary DNS server (10.0.2.1) and a fallback, or secondary, DNS server (10.0.2.2). resolved.conf is less commonly used. 

Though Ubuntu server uses systemd-networkd, it relies on netplan as the front-end for the configuration. For example:

```yaml
# This is the network config written by 'subiquity'

network:       
	version: 2
	renderer: networkd
	ethernets:
		enp1s0:
			addresses: [10.0.2.53/24]
			routes:
        	- to: default
            via: 10.0.2.1
			nameservers: 
				search: [example.com]
				addresses: [10.0.2.1]
```

Here, the DNS servers are known as "nameservers" and there is one listed at 10.0.2.1.

> Note:
	If you were working at a Debian server with a default configuration, you would simply use resolv.conf, and would modify DNS there. This is because it uses the networking service, so networkd and NetworkManager do not apply. 

### Summary
You can change the hostname with the `hostnamectl` command or by accessing the /etc/hostname file. DNS can be modified within /etc/resolv.conf, or (if using networkd) /etc/resolved.conf, or (if using NetworkManager) with the nmcli command (among other places). 

üëç **You are doing just fine. Continue!**
  
---
